.panel.panel-default
	.panel-body.panel
		- if params[:id]
			%h1 Edit league
		- else
			%h1 Start a league
	.panel-body{:id => ("league_creation" unless params[:id])}
		= form_for(@league) do |f|
			/ Errors Message
			- if @league.errors.any?
				.row.form-group.alert.alert-danger{:role => "alert"}
					%h4
						= pluralize(@league.errors.count, 'error')
						prohibited this league from being saved:
					%ul
						- @league.errors.full_messages.each do |message|
							%li= message
			.row
				= f.hidden_field :commissioner_id, value: @current_user.id
			/ Name of League
			.row.form-group
				.col-md-3.text-right
					= f.label :league_name
					%br/
				.col-md-6{:id => "league_name", :data => {:toggle => "popover", :trigger => "hover", :content => "And here's some amazing content. It's very engaging. Right?"}, :title => "Enter League Name"} 
					= f.text_field :name, class:"form-control", :placeholder => "Enter name here", :required => true
			/ Select show to filter season
			.row.form-group
				.col-md-3.text-right
					= label_tag :show
				.col-md-6
					/ Disable popup description if editing league;
					/ New league will get popup description of fields
					- if @league_show_id
						.div#popupDisabler.hidden= @league_show_id
						= select_tag(:show_id, options_for_select(Show.select_show, @league_show_id), {class:"form-control step1"})
					- else
						= f.select :show_list, {}, {:selected => "Select a show"}, class:"form-control step1", :required => true
						= select_tag(:show_list, (), {:prompt => "Select a show", class:"form-control step1", :required => true})
			/ Select reality show's season
			.row.form-group
				.col-md-3.text-right
					= f.label :season
					%br/
				.col-md-6
					- if @league_season_id
						= f.select(:season, options_for_select(Season.select_season, @league_season_id), {:include_blank => "Select a season"}, {class:"form-control step2"})
						Premieres: #{@league.season.premiere_date.strftime("%m/%d/%Y")}
					- else
						= f.select(:season, [], {:include_blank => "Select a season"}, class:"form-control step2", :required => true)
			/ Public or private league, public default
			.row.form-group
				.col-md-3.text-right
					= f.label :league_access
				.col-md-6{:id => "league_type", :data => {:toggle => "popover", :trigger => "hover", :content => "Go 'Public' if you want others to search and join your league. Select 'Private' if you want an exclusive 'invite-only' league."}, :title => "Public vs. Private"}
					.col-md-6
						= f.radio_button :public_access, true
						= f.label(:public, 'Public league')
					.col-md-6
						= f.radio_button :public_access, false
						= f.label(:private, 'Private league')
			/	Type
			.row.form-group
				.col-md-3.text-right
					= f.label :type
					%br/
				.col-md-6{:id => "type", :data => {:toggle => "popover", :trigger => "hover", :content => "And here's some amazing content. It's very engaging. Right?"}, :title => "Dismissible popover"} 
					- if @league_type	
						= f.select(:type, options_for_select(League.select_type, @league.type), {}, {:class => "form-control"})
					- else
						= f.select(:type, options_for_select(League.select_type), {:include_blank => "Select draft type"}, class:"form-control")
			.row.form-group
				.col-md-3.text-right
					= f.label :scoring_system
					%br/
				.col-md-6{:id => "league_scoring", :data => {:toggle => "popover", :trigger => "hover", :content => "Choose between standard scoring system for a show's contestant, or customize your league's scoring scheme."}, :title => "Select Scoring System"}
					.col-md-6
						= f.radio_button :scoring_system, 1
						= f.label(:standard, 'Standard')
					.col-md-6
						= f.radio_button :scoring_system, 2
						= f.label(:custom, 'Custom')
			/ Draft deadline
			.row.form-group
				.col-md-3.text-right
					= f.label :draft_deadline
				.col-md-6
					= f.date_field :draft_deadline, selected: Date.today, id: "draftDatePicker", class: "form-control"
			.row.form-group
				.col-md-3.text-right
					= f.label :draft_limit
				.col-md-6
					= f.number_field :draft_limit, id: "draftLimitField", min: 2, max: 20, step: 1, class: "form-control", placeholder: 2
			/ Submit
			.row.form-group
				.actions.col-md-offset-3.col-md-9
					- if params[:id]
						= f.submit "Update League", :class => "btn btn-default"
						= link_to("Cancel", league_path(@league.id), class:'btn btn-default')
					- else
						= f.submit "Create League", :class => "btn btn-default"
						= link_to("Cancel", leagues_path, class:'btn btn-default')